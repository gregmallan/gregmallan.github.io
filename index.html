<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Greg Allan">
    <title>Greg Allan Portfolio</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.6.17/dist/css/uikit.min.css" />
    <link rel="stylesheet" href="css/main.css" />
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.6.17/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.6.17/dist/js/uikit-icons.min.js"></script>
</head>

<body>
    <header>
        <div uk-sticky="media: 960" class="uk-navbar-container tm-navbar-container uk-sticky">
            <div class="uk-container uk-container-expand">
                <nav class="uk-navbar">
                    <div class="uk-navbar-left">
                        <a href="/index.html" class="uk-navbar-item uk-logo">Greg Allan</a>
                    </div>
                    <div class="uk-navbar-right">
                        <ul class="uk-navbar-nav uk-visible@m">
                            <li class="uk-active">
                                <a href="">Projects</a>
                            </li>
                            <!-- <li class="">
                                <a href="#">Experience</a>
                            </li>
                            <li class="">
                                <a href="#">Resume</a>
                            </li> -->
                            <li class="">
                                <a href="https://github.com/gregmallan" class="uk-navbar-item uk-logo">
                                    <img src="/images/logos/github/png/GitHub-Mark-32px.png"
                                        class="uk-margin-small-right">
                                </a>
                            </li>
                        </ul>
                        <a uk-navbar-toggle-icon="" href="#offcanvas-nav" uk-toggle=""
                            class="uk-navbar-toggle uk-hidden@m uk-icon uk-navbar-toggle-icon" aria-expanded="false">
                        </a>
                    </div>
                </nav>
            </div>
        </div>

        <div id="offcanvas-nav" uk-offcanvas="overlay: true">
            <div class="uk-offcanvas-bar">
                <ul class="uk-nav uk-nav-primary uk-nav-center">
                    <li class="uk-active">
                        <a href="#">Projects</a>
                    </li>
                    <!-- <li class="">
                        <a href="#">Experience</a>
                    </li>
                    <li class="">
                        <a href="#">Resume</a>
                    </li> -->
                    <li class="">
                        <a href="https://github.com/gregmallan" class="uk-navbar-item uk-logo">
                            <img src="/images/logos/github/png/GitHub-Mark-Light-32px.png" class="">
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </header>

    <div class="uk-container uk-container-large  uk-margin-large-bottom">
        <div class="uk-margin-medium-top uk-margin-medium-bottom">
            <h1 class="uk-text-light uk-text-center">Personal Projects</h1>
        </div>

        <div class="uk-grid-match uk-child-width-1-3@m" uk-grid>

            <div id="project-weather-api" class="project-card">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-media-top">
                        <img class="" src="/images/stock/lightning.jpg" alt="lightning">
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title">WeatherAPI</h3>
                        <div class="tech-logos-wrapper uk-margin">
                            <div class="uk-flex uk-flex-wrap">
                                <div><img src="/images/logos/python.png" alt="Python"></div>
                                <div><img src="/images/logos/django.png" alt="Django"></div>
                                <div><img src="/images/logos/drf.png" alt="Django Rest Framework"></div>
                                <div><img src="/images/logos/docker.webp" alt="Docker"></div>
                                <div><img src="/images/logos/postgres.png" alt="Postgres"></div>
                                <div><img src="/images/logos/celery.png" alt="Celery"></div>
                                <!-- <div><img src="/images/logos/nginx.png" alt="Nginx"></div> -->
                                <div><img src="/images/logos/pytest.png" alt="Pytest"></div>
                                <!-- <li><img src="/images/logos/redis.png" alt="Redis"></div> -->
                            </div>
                        </div>
                        <p>A weather API built with Django Rest Framework serving data from Environment Canada
                        </p>
                        <div class="project-button-wrapper">
                            <p uk-margin>
                                <a class="uk-button uk-button-default uk-button-small" href="https://weatherapi.ca/api/">Try it out (In
                                    development)</a>
                                <!-- <button class="uk-button uk-button-default uk-button-small" disabled>In -->
                                    <!-- development</button> -->
                                <button class="uk-button uk-button-default uk-button-small" disabled><span
                                        uk-icon="icon: github"></span>&nbsp;Private Repo</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="project-will-they-win-flask" class="project-card">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-media-top">
                        <img class="" src="images/stock/skydome.jpg" alt="Skydome">
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title">Will They Win API</h3>
                        <div class="tech-logos-wrapper uk-margin">
                            <div class="uk-flex uk-flex-wrap">
                                <div><img src="/images/logos/python.png" alt="Python"></div>
                                <div><img src="/images/logos/flask.png" alt="Flask"></div>
                                <div><img src="/images/logos/pytest.png" alt="Pytest"></div>
                            </div>
                        </div>
                        <p>A joke API inspired by the Vancouver Canucks &ndash; responses return a variation of
                            'no'
                        </p>
                        <div class="project-button-wrapper">
                            <p uk-margin>
                                <a class="uk-button uk-button-default uk-button-small" href="#try-will-they-win-modal" uk-toggle>Try it out</a>
                                <a class="uk-button uk-button-default uk-button-small"
                                    href="https://github.com/gregmallan/willtheywin">
                                    <span uk-icon="icon: github"></span>&nbsp;View the code</button>
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="project-stega-saurus" class="project-card">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-media-top">
                        <img class="" src="images/stock/light-water-tunnle.jpg" alt="">
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title">stega-saurus</h3>
                        <div class="tech-logos-wrapper uk-margin">
                            <div class="uk-flex uk-flex-wrap">
                                <div><img src="/images/logos/python.png" alt="Python"></div>  
                                <div><img src="/images/logos/pytest.png" alt="Pytest"></div>
                            </div>
                        </div>
                        <p>A python CLI package to perform steganography, hiding data in other data
                        </p>
                        <div class="project-button-wrapper">
                            <p uk-margin>
                                <a class="uk-button uk-button-default uk-button-small" 
                                    href="https://pypi.org/project/stega-saurus-py/" uk-toggle>Install from PyPi</a>
                                <a class="uk-button uk-button-default uk-button-small"
                                    href="https://github.com/gregmallan/stega-saurus/">
                                    <span uk-icon="icon: github"></span>&nbsp;View the code</button>
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="project-photoscout" class="project-card">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-media-top">
                        <img class="" src="/images/stock/man-in-forset.jpg" alt="lightning">
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title">PhotoScout</h3>
                        <div class="tech-logos-wrapper uk-margin">
                            <div class="uk-flex uk-flex-wrap">
                                <div><img src="/images/logos/android.png" alt="Android"></div>
                                <!-- <div><img src="/images/logos/firebase.png" alt="Firebase"></div> -->
                                <div><img src="/images/logos/java.png" alt="Java"></div>
                            </div>
                        </div>
                        <p>An Android app to track locations of photographic opportunities
                        </p>
                        <div class="project-button-wrapper">
                            <p uk-margin>
                                <!-- <a class="uk-button uk-button-default uk-button-small" href="#">Try it out</a> -->
                                <button class="uk-button uk-button-default uk-button-small" disabled>In
                                    development</button>
                                <button class="uk-button uk-button-default uk-button-small" disabled><span
                                        uk-icon="icon: github"></span>&nbsp;Private Repo</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="project-bucket-list" class="project-card">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-media-top">
                        <img class="" src="/images/stock/todo-list-notebook.jpg" alt="lightning">
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title">BucketListr</h3>

                        <div class="tech-logos-wrapper uk-margin">
                            <div class="uk-flex uk-flex-wrap">
                                <div><img src="/images/logos/python.png" alt="Python"></div>
                                <div><img src="/images/logos/masonite.png" alt="Masonite"></div>
                            </div>
                        </div>
                        <p>A bucklist tracking web application
                        </p>
                        <div class="project-button-wrapper">
                            <p uk-margin>
                                <!-- <a class="uk-button uk-button-default uk-button-small" href="#">Try it out</a> -->
                                <button class="uk-button uk-button-default uk-button-small" disabled>In
                                    development</button>
                                <button class="uk-button uk-button-default uk-button-small" disabled><span
                                        uk-icon="icon: github"></span>&nbsp;Private Repo</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="project-slacker" class="project-card">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-media-top">
                        <img class="" src="images/stock/typing-2.jpg" alt="lightning">
                    </div>
                    <div class="uk-card-body">
                        <h3 class="uk-card-title">Slacker</h3>
                        <div class="tech-logos-wrapper uk-margin">
                            <div class="uk-flex uk-flex-wrap">
                                <div><img src="/images/logos/python.png" alt="Python"></div>  
                                <div><img src="/images/logos/pytest.png" alt="Pytest"></div>
                            </div>
                        </div>
                        <p>A python package to send Slack messages through Slack Aps and the messaging API
                        </p>
                        <div class="project-button-wrapper">
                            <p uk-margin>
                                <!-- <a class="uk-button uk-button-default uk-button-small" href="#">Try it out</a> -->
                                <button class="uk-button uk-button-default uk-button-small" disabled>In
                                    development</button>
                                <button class="uk-button uk-button-default uk-button-small" disabled><span
                                        uk-icon="icon: github"></span>&nbsp;Private Repo</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            
        </div>
    </div>


    <div id="try-will-they-win-modal" class="uk-flex-top" uk-modal>
        <div
            class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-width-3-4@m uk-width-2-3@l uk-width-1-2@xl">
            <div id="try-will-they-win-form-wrapper">
                <h2 class="uk-modal-title">Try Will They Win API</h2>
                <form>
                    <!-- Prevent implicit submission of the form on Enter in text field-->
                    <button type="submit" disabled style="display: none" aria-hidden="true"></button>

                    <div class="uk-margin">
                        <label class="uk-form-label" for="">Team Name:</label>
                        <div class="uk-form-controls">
                            <input id="will-they-win-team-input" class="uk-input" type="text" placeholder="Canucks">
                        </div>
                    </div>
                </form>
                <div class="uk-text-right">
                    <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
                    <button id="try-will-they-win-submit" class="uk-button uk-button-primary" type="button">Make API
                        request</button>
                </div>
            </div>

            <div id="api-data-display-wrapper" class="" style="display: none;">
                <h2 id="data-display-modal-title" class="uk-modal-title">API request</h2>
                <div id="url-display-wrapper">Request:<br>
                    <pre>GET: <span id=try-will-they-win-requested-url></span></pre>
                </div>

                <div id="will-they-win-response">Response:<br>
                    <div id="try-will-they-win-spinner" class="" style="display: none;">
                        <span class="" uk-spinner="ratio: 1"></span>
                    </div>
                    <div id="data-wrapper">
                        <pre id="api-data-display" style="display: none;"></pre>
                        <div class="uk-text-right">
                            <button id="close-results" class="uk-button uk-button-default uk-modal-close"
                                type="button">Close</button>
                            <button id="make-new-request" class="uk-button uk-button-primary" type="button">Make another
                                request</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>

        const willTheyWinURL = "https://grega.pythonanywhere.com/will-they-win/"

        function clearForm() {
            var teamInput = document.getElementById("will-they-win-team-input");
            teamInput.value = null;
        }

        function setElementDisplay(elementId, displayValue) {
            var element = document.getElementById(elementId);
            element.style.display = displayValue;
        }

        function setFormDisplay(displayValue) {
            setElementDisplay("try-will-they-win-form-wrapper", displayValue)
        }

        function setSpinnerDisplay(displayValue) {
            setElementDisplay("try-will-they-win-spinner", displayValue)
        }

        function setWillTheyWinResponseDisplay(displayValue) {
            setElementDisplay("will-they-win-response", displayValue)
        }

        function setResultDisplay(displayValue) {
            setElementDisplay("api-data-display-wrapper", displayValue)
        }

        function setResponseDataDisplay(displayValue) {
            setElementDisplay("api-data-display", displayValue)
        }

        function setResponseData(jsonData) {
            var apiDataDispaly = document.getElementById("api-data-display");
            apiDataDispaly.innerText = JSON.stringify(jsonData);
        }

        function clearResponseData() {
            var apiDataDispaly = document.getElementById("api-data-display");
            apiDataDispaly.innerText = null;
        }

        function resetWillTheyWinModal() {
            setFormDisplay("block");
            setSpinnerDisplay("none");
            setResultDisplay("none");
            setResponseDataDisplay("none");
            clearResponseData();
        }

        function handleAPIResponseJSONResults(jsonData) {
            setSpinnerDisplay("none");
            setResponseData(jsonData);
            setResponseDataDisplay("block");
            setResultDisplay("block");
        }

        const sleep = (milliseconds) => {
            console.log("sleepy time...")
            return new Promise(resolve => setTimeout(resolve, milliseconds))
        }

        async function getRequest(url) {

            const response = await fetch(url, {
                method: 'GET',
                mode: 'cors',
                cache: 'no-cache',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                redirect: 'follow',
                referrerPolicy: 'no-referrer',
            });
            
            // TODO: handle non 200 responses
            return response.json(); // parses JSON response into native JavaScript objects

        }

        UIkit.util.on('#try-will-they-win-submit', 'click', function (e) {
            e.preventDefault();
            e.target.blur();

            var teamName = document.getElementById("will-they-win-team-input").value;
            var url = willTheyWinURL + "?" + new URLSearchParams({ team: teamName })
            var requestedURLSpan = document.getElementById("try-will-they-win-requested-url");
            requestedURLSpan.innerText = url

            setFormDisplay("none");
            setResultDisplay("block");
            setSpinnerDisplay("block");
            setWillTheyWinResponseDisplay("block");
            clearForm();

            getRequest(url)
                .then(data => { // JSON data parsed by `data.json()` call

                    const slowYourRoll = async () => {
                        // Sleep before showing the data as the API response is very fast and the spinner only flashes
                        await sleep(250);
                        handleAPIResponseJSONResults(data);
                    }

                    slowYourRoll()

                });
        });

        UIkit.util.on('#make-new-request', 'click', function (e) {
            e.preventDefault();
            e.target.blur();
            resetWillTheyWinModal();
        });

        UIkit.util.on('#close-results', 'click', function (e) {
            resetWillTheyWinModal();
        });

        UIkit.util.on('#try-will-they-win-modal', 'beforeshow', function (e) {
            resetWillTheyWinModal();
        });

        UIkit.util.on('#try-will-they-win-modal', 'hidden', function (e) {
            resetWillTheyWinModal();
        });


    </script>

</body>

</html>
